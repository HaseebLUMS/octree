cmake_minimum_required(VERSION 3.15)
project(testing)


set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CC_STANDARD 17)

set(CMAKE_MODULE_PATH
    "${CMAKE_CURRENT_SOURCE_DIR}/cmake"
    ${CMAKE_MODULE_PATH})

list(APPEND CMAKE_PREFIX_PATH "${CMAKE_CURRENT_SOURCE_DIR}/libs/mvfst/_build")
list(APPEND CMAKE_PREFIX_PATH "/usr/local")

find_package(PkgConfig REQUIRED)
include(FetchContent)

# ## ReaderWriterQueue
# FetchContent_Declare(
#   readerwriterqueue
#   GIT_REPOSITORY    https://github.com/cameron314/readerwriterqueue
#   GIT_TAG           master
# )

# FetchContent_MakeAvailable(readerwriterqueue)

find_package(Eigen3 3.1.2)
find_package(PCL 1.1.0 REQUIRED)
find_package(OpenCV REQUIRED)
find_package(JsonCpp REQUIRED)

include_directories(${PCL_INCLUDE_DIRS})
link_directories(${PCL_LIBRARY_DIRS})
add_definitions(${PCL_DEFINITIONS})

include_directories(${OpenCV_INCLUDE_DIRS})


add_executable(ssim src/quality_test/ssim.cpp)

target_link_libraries(
    ssim
    ${WEBP_LIBRARIES}
    ${JPEG_LIBRARIES}
    ${PCL_LIBRARIES}
    ${AVIF_LIBRARIES}
    ${TURBOJPEG_LIBRARIES}
    ${OpenCV_LIBRARIES}
    ${JsonCpp_LIBRARIES}
)